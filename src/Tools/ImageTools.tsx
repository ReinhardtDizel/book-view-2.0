import {Image} from "../Models/Image";
import {Book} from "../Models/Book";

const BASE64_MARKER = ';base64,';

export const JPEG_IMAGE_DATA = 'data:image/jpeg;base64';

export const JPEG_NO_IMAGE = '/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAH0AUADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr4J/aC/4Lo6X+zh/wVZ0b9nHX/h3dp4Z1A6XbXvj7+2QLfSrzUklNnFLaeQcJJLGsfmGcAF87eOfvavyK+Lv7I3h79ur/gun+1p8LfEylLDxT8EdGigukz5um3aXNtJbXcZHIeGZY5B67MHgmsnO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F/dxbYxjhRk16RRRR0S6JJL0Ssl6JaLyDq33u/m9W/m9WFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/2Q=='

export  function base64ToArray(data:any) {
    const base64Index = data.indexOf(BASE64_MARKER) + BASE64_MARKER.length;
    const base64 = data.substring(base64Index);
    const raw = window.atob(base64);
    const rawLength = raw.length;
    let array = new Uint8Array(new Array(rawLength));
    for(let i = 0; i < rawLength; i++) {
        array[i] = raw.charCodeAt(i);
    }
    return Array.from(array);
}

export function arrayToBase64(data:any) {
    let binary = '';
    const bytes = new Uint8Array(data);
    const len = bytes.byteLength;
    for(let i = 0; i < len; i++) {
        binary += String.fromCharCode(bytes[i]);
    }
    const base64 = window.btoa(binary);
    return base64;
}

function isCover(element:Image, index:number, array:Image[]){
    if (element.cover == true) {
        return element;
    }
}

export function getBookCover(book:Book | undefined) {
    if(book !== undefined && book !== null) {
        const images:Image[] | undefined = book.images;
        if(images !== undefined && images !== null) {
            const image = images.find(isCover)
            if(image !== undefined && image !== null) {
                const {pic} = image;
                if (pic !== undefined && pic !== null) {
                    return pic;
                }
            }
        }
    }
}